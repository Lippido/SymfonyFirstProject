{% extends 'no-nav-base.html.twig' %}

{% block title %}Login - MusicApp{% endblock %}

{% block body %}
<div class="auth-container">
    <div class="auth-box">
        <div class="auth-header">
            <h1>MusicApp</h1>
            <p>Sign in to continue</p>
        </div>

        {% if error %}
            <div class="auth-alert auth-error">
                {{ error.messageKey|trans(error.messageData, 'security') }}
            </div>
        {% endif %}

        {% if app.user %}
            <div class="auth-alert auth-info">
                You are logged in as <strong>{{ app.user.userIdentifier }}</strong>
                <a href="{{ path('app_logout') }}" class="auth-link">Logout</a>
            </div>
        {% endif %}

        {{ form_start(form, { 'attr': { 'class': 'auth-form' } }) }}
            <div class="form-group">
                {{ form_label(form._username, 'Username', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(form._username, {'attr': {'class': 'form-input', 'placeholder': 'Enter your username'}}) }}
            </div>

            <div class="form-group">
                {{ form_label(form._password, 'Password', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(form._password, {'attr': {'class': 'form-input', 'placeholder': 'Enter your password'}}) }}
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <button class="auth-button" type="submit">
                Sign In
            </button>

            <div class="auth-footer">
                Don't have an account? <a href="{{ path('app_register') }}" class="auth-link">Register here</a>
                <br>
                <a href="{{ path('search_tracks') }}" class="auth-link">Continue without login</a>
            </div>
        {{ form_end(form) }}
    </div>
</div>
{% endblock %}
